# 测试中途退出和继续功能使用指南

## ✅ 功能已实现

AIMBTI 应用已经支持测试中途退出和继续功能，让用户可以随时暂停测试并稍后继续。

## 📱 功能使用说明

### 1. 中途退出测试

在测试过程中，如果需要退出：

1. **点击左上角的 X 按钮**
   - 如果还没有回答任何题目，会直接退出
   - 如果已经回答了题目，会弹出确认对话框

2. **选择退出方式**：
   - **"保存并退出"** - 保存当前进度，下次可以继续
   - **"放弃测试"** - 删除所有进度，完全退出
   - **"继续测试"** - 取消退出，继续答题

### 2. 继续未完成的测试

当有未完成的测试时：

1. **打开应用，进入测试页面**
2. **点击"开始测试"按钮**
3. **系统会自动检测到未完成的测试**，弹出提示：
   - "检测到您有未完成的测试进度，是否要继续？"
4. **选择操作**：
   - **"继续测试"** - 从上次停止的地方继续
   - **"重新开始"** - 删除之前的进度，开始新测试
   - **"取消"** - 返回主页面

### 3. 进度保存机制

- **自动保存**：每次回答问题后自动保存进度
- **保存内容**：
  - 当前在第几题
  - 当前在第几阶段（共3个阶段）
  - 所有已回答的答案
  - 语言设置

### 4. 特殊情况处理

- **切换语言**：保存的进度会记住之前的语言设置
- **应用重启**：进度会完整保留
- **多次退出**：每次都会覆盖之前的进度，只保留最新的

## 🎯 使用场景

1. **时间不够**：测试需要约10-15分钟，如果中途有事可以保存退出
2. **需要思考**：遇到难以抉择的问题，可以保存后稍后继续
3. **意外中断**：接到电话或其他紧急事情时可以安全退出

## 💡 注意事项

1. 系统只保存一份进度，新的进度会覆盖旧的
2. 完成测试后，保存的进度会自动清除
3. 选择"放弃测试"会永久删除进度，无法恢复

## 🔧 技术实现

- 使用 SwiftData 进行本地数据持久化
- TestProgress 模型存储进度信息
- TestProgressService 管理进度的保存、加载和删除
- 每次答题后自动触发保存

功能已完全实现并经过测试，用户可以放心使用！